!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.ReactContexify=t(require("react")):e.ReactContexify=t(e.react)}(window,function(e){return function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t,i){"use strict";var r,n,o,s;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.AUTO="auto",e.START="start",e.CENTER="center",e.END="end"}(t.ALIGNMENT||(t.ALIGNMENT={})),function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"}(s=t.DIRECTION||(t.DIRECTION={})),function(e){e.OBSERVED="observed",e.REQUESTED="requested"}(t.SCROLL_CHANGE_REASON||(t.SCROLL_CHANGE_REASON={})),function(e){e.vertical="scrollTop",e.horizontal="scrollLeft"}(t.scrollProp||(t.scrollProp={})),function(e){e.vertical="height",e.horizontal="width"}(t.sizeProp||(t.sizeProp={})),t.positionProp=((r={})[s.VERTICAL]="top",r[s.HORIZONTAL]="left",r),t.marginProp=((n={})[s.VERTICAL]="marginTop",n[s.HORIZONTAL]="marginLeft",n),t.oppositeMarginProp=((o={})[s.VERTICAL]="marginBottom",o[s.HORIZONTAL]="marginRight",o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(2);t.VirtualList=r.default;var n=i(0);t.ALIGNMENT=n.ALIGNMENT},function(e,t,i){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=this&&this.__rest||function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(i(3)),u=s(i(4)),f=i(0),l=i(0);t.ScrollDirection=l.DIRECTION;var c={overflow:"auto",willChange:"transform",WebkitOverflowScrolling:"touch"},d={position:"relative",width:"100%",minHeight:"100%"},p={position:"absolute",top:0,left:0,width:"100%"},h=r({},p,{position:"sticky"}),m=a.useRef,I=a.useState,v=a.useEffect;function S(e){var t,i=function(){var e=I()[1];return function(){return e({})}}(),o=m(null),s=m({}),l=m(0),S=function(e){return function(t){return function(e,t){return"function"==typeof t?t(e):Array.isArray(t)?t[e]:t}(t,e)}},E=function(e){return e.estimatedItemSize||"number"==typeof e.itemSize&&e.itemSize||50},O=new u.default({itemCount:e.itemCount,itemSizeGetter:S(e.itemSize),estimatedItemSize:E(e)}),g=function(t,i,r){void 0===i&&(i=e.scrollToAlignment),void 0===r&&(r=e.itemCount);var n=e.scrollDirection,o=void 0===n?f.DIRECTION.VERTICAL:n;return(t<0||t>=r)&&(t=0),O.getUpdatedOffsetForIndex({align:i,containerSize:Number(e[f.sizeProp[o]]),currentOffset:Q||0,targetIndex:t})},C=I({offset:e.scrollOffset||null!=e.scrollToIndex&&g(e.scrollToIndex)||0,scrollChangeReason:f.SCROLL_CHANGE_REASON.REQUESTED}),z=C[0],y=C[1];v(function(){var t=e.scrollOffset,i=e.scrollToIndex;return o.current.addEventListener("scroll",A,{passive:!0}),null!=t?R(t):null!=i&&R(g(i)),function(){o.current.removeEventListener("scroll",A)}},[]),v(function(){var t=e.itemSize;O.updateConfig({itemSizeGetter:S(t)}),T()},[e.itemSize]),v(function(){y({offset:e.scrollOffset||0,scrollChangeReason:f.SCROLL_CHANGE_REASON.REQUESTED})},[e.scrollOffset]),v(function(){var t=e.itemCount;O.updateConfig({itemCount:t,estimatedItemSize:E(e)}),T(),i()},[e.itemCount,e.stickyIndices]),v(function(){"number"==typeof j&&y({offset:g(j,V,_),scrollChangeReason:f.SCROLL_CHANGE_REASON.REQUESTED})},[e.scrollToIndex,e.scrollToAlignment]),v(function(){var e=z.offset;z.scrollChangeReason===f.SCROLL_CHANGE_REASON.REQUESTED&&R(e)},[z.offset]);var R=function(t){var i=e.scrollDirection,r=void 0===i?f.DIRECTION.VERTICAL:i;o.current[f.scrollProp[r]]=t},T=function(e){void 0===e&&(e=0),s.current={},O.resetItem(e)},A=function(t){var i=e.onScroll,r=x();r<0||t.target!==o.current||(y({offset:r,scrollChangeReason:f.SCROLL_CHANGE_REASON.OBSERVED}),"function"==typeof i&&i(r,t))},x=function(){var t=e.scrollDirection,i=void 0===t?f.DIRECTION.VERTICAL:t;return o.current[f.scrollProp[i]]},N=function(t,i){var n,o,a=s.current[t];if(a)return a;var u=e.scrollDirection,l=void 0===u?f.DIRECTION.VERTICAL:u,c=O.getSizeAndPositionForIndex(t),d=c.size,m=c.offset;return s.current[t]=i?r({},h,((n={})[f.sizeProp[l]]=d,n[f.marginProp[l]]=m,n[f.oppositeMarginProp[l]]=-(m+d),n.zIndex=1,n)):r({},p,((o={})[f.sizeProp[l]]=d,o[f.positionProp[l]]=m,o))},M=(e.estimatedItemSize,e.height),L=e.overscanCount,P=void 0===L?3:L,b=e.renderItem,_=e.itemCount,D=(e.itemSize,e.onItemsRendered),w=(e.onScroll,e.scrollDirection),G=void 0===w?f.DIRECTION.VERTICAL:w,j=(e.scrollOffset,e.scrollToIndex),V=e.scrollToAlignment,H=e.stickyIndices,F=e.style,k=e.width,U=n(e,["estimatedItemSize","height","overscanCount","renderItem","itemCount","itemSize","onItemsRendered","onScroll","scrollDirection","scrollOffset","scrollToIndex","scrollToAlignment","stickyIndices","style","width"]);l.current!==_&&(O.updateConfig({itemCount:_,estimatedItemSize:E(e)}),T(),l.current=_);var Q=z.offset,Z=O.getVisibleRange({containerSize:Number(e[f.sizeProp[G]])||0,offset:Q,overscanCount:P}),q=Z.start,B=Z.stop,W=[],J=r({},c,F,{height:M,width:k}),K=r({},d,((t={})[f.sizeProp[G]]=O.getTotalSize(),t));if(null!=H&&0!==H.length&&(H.forEach(function(e){return W.push(b({index:e,style:N(e,!0)}))}),G===f.DIRECTION.HORIZONTAL&&(K.display="flex")),void 0!==q&&void 0!==B){for(var X=q;X<=B;X++)null!=H&&H.includes(X)||W.push(b({index:X,style:N(X,!1)}));"function"==typeof D&&D({startIndex:q,stopIndex:B})}return a.createElement("div",r({ref:o},U,{style:J}),a.createElement("div",{style:K},W))}S.defaultProps={overscanCount:3,scrollDirection:f.DIRECTION.VERTICAL,width:"100%"},t.default=S},function(t,i){t.exports=e},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(0),n=function(){function e(e){var t=e.itemCount,i=e.itemSizeGetter,r=e.estimatedItemSize;this.itemSizeGetter=i,this.itemCount=t,this.estimatedItemSize=r,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1}return e.prototype.updateConfig=function(e){var t=e.itemCount,i=e.itemSizeGetter,r=e.estimatedItemSize;null!=t&&(this.itemCount=t),null!=r&&(this.estimatedItemSize=r),null!=i&&(this.itemSizeGetter=i)},e.prototype.getLastMeasuredIndex=function(){return this.lastMeasuredIndex},e.prototype.getSizeAndPositionForIndex=function(e){if(e<0||e>=this.itemCount)throw Error("Requested index "+e+" is outside of range 0.."+this.itemCount);if(e>this.lastMeasuredIndex){for(var t=this.getSizeAndPositionOfLastMeasuredItem(),i=t.offset+t.size,r=this.lastMeasuredIndex+1;r<=e;r++){var n=this.itemSizeGetter(r);if(null==n||isNaN(n))throw Error("Invalid size returned for index "+r+" of value "+n);this.itemSizeAndPositionData[r]={offset:i,size:n},i+=n}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]},e.prototype.getSizeAndPositionOfLastMeasuredItem=function(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}},e.prototype.getTotalSize=function(){var e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.itemCount-this.lastMeasuredIndex-1)*this.estimatedItemSize},e.prototype.getUpdatedOffsetForIndex=function(e){var t=e.align,i=void 0===t?r.ALIGNMENT.START:t,n=e.containerSize,o=e.currentOffset,s=e.targetIndex;if(n<=0)return 0;var a,u=this.getSizeAndPositionForIndex(s),f=u.offset,l=f-n+u.size;switch(i){case r.ALIGNMENT.END:a=l;break;case r.ALIGNMENT.CENTER:a=f-(n-u.size)/2;break;case r.ALIGNMENT.START:a=f;break;default:a=Math.max(l,Math.min(f,o))}var c=this.getTotalSize();return Math.max(0,Math.min(c-n,a))},e.prototype.getVisibleRange=function(e){var t=e.containerSize,i=e.offset,r=e.overscanCount;if(0===this.getTotalSize())return{};var n=i+t,o=this.findNearestItem(i);if(void 0===o)throw Error("Invalid offset "+i+" specified");var s=this.getSizeAndPositionForIndex(o);i=s.offset+s.size;for(var a=o;i<n&&a<this.itemCount-1;)a++,i+=this.getSizeAndPositionForIndex(a).size;return r&&(o=Math.max(0,o-r),a=Math.min(a+r,this.itemCount-1)),{start:o,stop:a}},e.prototype.resetItem=function(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)},e.prototype.findNearestItem=function(e){if(isNaN(e))throw Error("Invalid offset "+e+" specified");e=Math.max(0,e);var t=this.getSizeAndPositionOfLastMeasuredItem(),i=Math.max(0,this.lastMeasuredIndex);return t.offset>=e?this.binarySearch({high:i,low:0,offset:e}):this.exponentialSearch({index:i,offset:e})},e.prototype.binarySearch=function(e){for(var t=e.low,i=e.high,r=e.offset,n=0,o=0;t<=i;){if(n=t+Math.floor((i-t)/2),(o=this.getSizeAndPositionForIndex(n).offset)===r)return n;o<r?t=n+1:o>r&&(i=n-1)}return t>0?t-1:0},e.prototype.exponentialSearch=function(e){for(var t=e.index,i=e.offset,r=1;t<this.itemCount&&this.getSizeAndPositionForIndex(t).offset<i;)t+=r,r*=2;return this.binarySearch({high:Math.min(t,this.itemCount-1),low:Math.floor(t/2),offset:i})},e}();t.default=n}])});
//# sourceMappingURL=ReactContexify.js.map