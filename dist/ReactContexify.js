!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.ReactContexify=t(require("react")):e.ReactContexify=t(e.react)}(window,(function(e){return function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=2)}([function(e,t,i){"use strict";var r,n,o,s;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.AUTO="auto",e.START="start",e.CENTER="center",e.END="end"}(t.ALIGNMENT||(t.ALIGNMENT={})),function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"}(s=t.DIRECTION||(t.DIRECTION={})),function(e){e.OBSERVED="observed",e.REQUESTED="requested"}(t.SCROLL_CHANGE_REASON||(t.SCROLL_CHANGE_REASON={})),function(e){e.vertical="scrollTop",e.horizontal="scrollLeft"}(t.scrollProp||(t.scrollProp={})),function(e){e.vertical="height",e.horizontal="width"}(t.sizeProp||(t.sizeProp={})),t.positionProp=((r={})[s.VERTICAL]="top",r[s.HORIZONTAL]="left",r),t.marginProp=((n={})[s.VERTICAL]="marginTop",n[s.HORIZONTAL]="marginLeft",n),t.oppositeMarginProp=((o={})[s.VERTICAL]="marginBottom",o[s.HORIZONTAL]="marginRight",o)},function(t,i){t.exports=e},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(3);t.VirtualList=r.default;var n=i(0);t.ALIGNMENT=n.ALIGNMENT},function(e,t,i){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=this&&this.__rest||function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=o(i(1)),a=i(1),f=s(i(4)),c=i(0),l=i(0);t.ScrollDirection=l.DIRECTION;var d={overflow:"auto",willChange:"transform",WebkitOverflowScrolling:"touch"},p={position:"relative",width:"100%",minHeight:"100%"},h={position:"absolute",top:0,left:0,width:"100%"},m=r(r({},h),{position:"sticky"});t.default=function(e){var t,i,o=e.estimatedItemSize,s=e.height,l=e.itemCount,S=e.itemSize,I=e.onItemsRendered,v=e.onScroll,E=e.overscanCount,O=void 0===E?3:E,g=e.renderItem,y=e.scrollDirection,z=void 0===y?c.DIRECTION.VERTICAL:y,x=e.scrollOffset,A=e.scrollToAlignment,C=e.scrollToIndex,N=e.stickyIndices,R=e.style,T=e.width,M=void 0===T?"100%":T,P=n(e,["estimatedItemSize","height","itemCount","itemSize","onItemsRendered","onScroll","overscanCount","renderItem","scrollDirection","scrollOffset","scrollToAlignment","scrollToIndex","stickyIndices","style","width"]),b=(i=a.useState()[1],function(){return i({})}),L=a.useRef(null),_=a.useRef({}),w=a.useRef(0),D=function(e){return function(t){return function(e,t){return"function"==typeof t?t(e):Array.isArray(t)?t[e]:t}(t,e)}},G=function(){return o||"number"==typeof S&&S||50},j=new f.default({itemCount:l,itemSizeGetter:D(S),estimatedItemSize:G()}),H=function(t,i,r){return void 0===i&&(i=A),void 0===r&&(r=l),(t<0||t>=r)&&(t=0),j.getUpdatedOffsetForIndex({align:i,containerSize:Number(e[c.sizeProp[z]]),currentOffset:F||0,targetIndex:t})},V=a.useState(x||null!=C&&H(C)||0),F=V[0],U=V[1],k=a.useState(c.SCROLL_CHANGE_REASON.REQUESTED),Q=k[0],Z=k[1],q=function(e){L.current&&(L.current[c.scrollProp[z]]=e)},B=function(e){var t=L.current?L.current[c.scrollProp[z]]:0;t<0||t===F||e.target!==L.current||(Z(c.SCROLL_CHANGE_REASON.OBSERVED),U(t),"function"==typeof v&&v(t,e))};a.useEffect((function(){return L.current&&L.current.addEventListener("scroll",B,{passive:!0}),null!=x?q(x):null!=C&&q(H(C)),function(){L.current&&L.current.removeEventListener("scroll",B)}}),[]);var W=function(e){void 0===e&&(e=0),_.current={},j.resetItem(e)};a.useEffect((function(){j.updateConfig({itemSizeGetter:D(S)}),W()}),[S]),a.useEffect((function(){Z(c.SCROLL_CHANGE_REASON.REQUESTED),U(x||0)}),[x]),a.useEffect((function(){j.updateConfig({itemCount:l,estimatedItemSize:G()}),W(),b()}),[l,N]),a.useEffect((function(){"number"==typeof C&&(U(H(C,A,l)),Z(c.SCROLL_CHANGE_REASON.REQUESTED))}),[C,A]),a.useEffect((function(){Q===c.SCROLL_CHANGE_REASON.REQUESTED&&q(F)}),[F]);var J=function(e,t){var i,n,o=_.current[e];if(o)return o;var s=j.getSizeAndPositionForIndex(e),u=s.size,a=s.offset;return _.current[e]=t?r(r({},m),((i={})[c.sizeProp[z]]=u,i[c.marginProp[z]]=a,i[c.oppositeMarginProp[z]]=-(a+u),i.zIndex=1,i)):r(r({},h),((n={})[c.sizeProp[z]]=u,n[c.positionProp[z]]=a,n))};w.current!==l&&(j.updateConfig({itemCount:l,estimatedItemSize:G()}),W(),w.current=l);var K=j.getVisibleRange({containerSize:Number(e[c.sizeProp[z]])||0,offset:F,overscanCount:O}),X=K.start,Y=K.stop,$=[],ee=r(r(r({},d),R),{height:s,width:M}),te=r(r({},p),((t={})[c.sizeProp[z]]=j.getTotalSize(),t));if(null!=N&&0!==N.length&&(N.forEach((function(e){return $.push(g({index:e,style:J(e,!0)}))})),z===c.DIRECTION.HORIZONTAL&&(te.display="flex")),void 0!==X&&void 0!==Y){for(var ie=X;ie<=Y;ie++)null!=N&&N.includes(ie)||$.push(g({index:ie,style:J(ie,!1)}));"function"==typeof I&&I({startIndex:X,stopIndex:Y})}return u.createElement("div",r({ref:L},P,{style:ee}),u.createElement("div",{style:te},$))}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(0),n=function(){function e(e){var t=e.itemCount,i=e.itemSizeGetter,r=e.estimatedItemSize;this.itemSizeGetter=i,this.itemCount=t,this.estimatedItemSize=r,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1}return e.prototype.updateConfig=function(e){var t=e.itemCount,i=e.itemSizeGetter,r=e.estimatedItemSize;null!=t&&(this.itemCount=t),null!=r&&(this.estimatedItemSize=r),null!=i&&(this.itemSizeGetter=i)},e.prototype.getLastMeasuredIndex=function(){return this.lastMeasuredIndex},e.prototype.getSizeAndPositionForIndex=function(e){if(e<0||e>=this.itemCount)throw Error("Requested index "+e+" is outside of range 0.."+this.itemCount);if(e>this.lastMeasuredIndex){for(var t=this.getSizeAndPositionOfLastMeasuredItem(),i=t.offset+t.size,r=this.lastMeasuredIndex+1;r<=e;r++){var n=this.itemSizeGetter(r);if(null==n||isNaN(n))throw Error("Invalid size returned for index "+r+" of value "+n);this.itemSizeAndPositionData[r]={offset:i,size:n},i+=n}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]},e.prototype.getSizeAndPositionOfLastMeasuredItem=function(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}},e.prototype.getTotalSize=function(){var e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.itemCount-this.lastMeasuredIndex-1)*this.estimatedItemSize},e.prototype.getUpdatedOffsetForIndex=function(e){var t=e.align,i=void 0===t?r.ALIGNMENT.START:t,n=e.containerSize,o=e.currentOffset,s=e.targetIndex;if(n<=0)return 0;var u,a=this.getSizeAndPositionForIndex(s),f=a.offset,c=f-n+a.size;switch(i){case r.ALIGNMENT.END:u=c;break;case r.ALIGNMENT.CENTER:u=f-(n-a.size)/2;break;case r.ALIGNMENT.START:u=f;break;default:u=Math.max(c,Math.min(f,o))}var l=this.getTotalSize();return Math.max(0,Math.min(l-n,u))},e.prototype.getVisibleRange=function(e){var t=e.containerSize,i=e.offset,r=e.overscanCount;if(0===this.getTotalSize())return{};var n=i+t,o=this.findNearestItem(i);if(void 0===o)throw Error("Invalid offset "+i+" specified");var s=this.getSizeAndPositionForIndex(o);i=s.offset+s.size;for(var u=o;i<n&&u<this.itemCount-1;)u++,i+=this.getSizeAndPositionForIndex(u).size;return r&&(o=Math.max(0,o-r),u=Math.min(u+r,this.itemCount-1)),{start:o,stop:u}},e.prototype.resetItem=function(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)},e.prototype.findNearestItem=function(e){if(isNaN(e))throw Error("Invalid offset "+e+" specified");e=Math.max(0,e);var t=this.getSizeAndPositionOfLastMeasuredItem(),i=Math.max(0,this.lastMeasuredIndex);return t.offset>=e?this.binarySearch({high:i,low:0,offset:e}):this.exponentialSearch({index:i,offset:e})},e.prototype.binarySearch=function(e){for(var t=e.low,i=e.high,r=e.offset,n=0,o=0;t<=i;){if(n=t+Math.floor((i-t)/2),(o=this.getSizeAndPositionForIndex(n).offset)===r)return n;o<r?t=n+1:o>r&&(i=n-1)}return t>0?t-1:0},e.prototype.exponentialSearch=function(e){for(var t=e.index,i=e.offset,r=1;t<this.itemCount&&this.getSizeAndPositionForIndex(t).offset<i;)t+=r,r*=2;return this.binarySearch({high:Math.min(t,this.itemCount-1),low:Math.floor(t/2),offset:i})},e}();t.default=n}])}));
//# sourceMappingURL=ReactContexify.js.map